<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Adverse Media Search Tool</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    h1 {
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    textarea {
      width: 100%;
      height: 150px;
      margin-bottom: 20px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
      resize: vertical;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    button {
      flex: 1 1 30%;
      padding: 10px;
      border: none;
      background-color: #007BFF;
      color: white;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .theme-toggle {
      margin-top: 20px;
      text-align: center;
    }

    .theme-toggle button {
      background-color: #28a745;
    }

    .dark-mode {
      background-color: #121212;
      color: #ffffff;
    }

    .dark-mode .container {
      background-color: #1f1f1f;
    }

    .toast {
      visibility: hidden;
      min-width: 250px;
      margin-left: -125px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 16px;
      position: fixed;
      z-index: 1;
      left: 50%;
      bottom: 30px;
      font-size: 17px;
      opacity: 0;
      transition: opacity 0.5s, visibility 0.5s;
    }

    .toast.show {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Adverse Media Search Tool</h1>
  <textarea id="nameInput" placeholder="Enter names/entities (one per line)..."></textarea>

  <div class="button-group">
    <button onclick="handleAction(1, 'search')">Set 1 - Search</button>
    <button onclick="handleAction(1, 'copy')">Set 1 - Copy URLs</button>
    <button onclick="handleAction(1, 'csv')">Set 1 - Export CSV</button>

    <button onclick="handleAction(2, 'search')">Set 2 - Search</button>
    <button onclick="handleAction(2, 'copy')">Set 2 - Copy URLs</button>
    <button onclick="handleAction(2, 'csv')">Set 2 - Export CSV</button>

    <button onclick="handleAction(3, 'search')">Set 3 - Search</button>
    <button onclick="handleAction(3, 'copy')">Set 3 - Copy URLs</button>
    <button onclick="handleAction(3, 'csv')">Set 3 - Export CSV</button>
  </div>

  <div class="theme-toggle">
    <button onclick="toggleTheme()">Toggle Theme</button>
  </div>
</div>

<div id="toast" class="toast">Action completed!</div>

<script>
  // Theme toggle logic
  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    if (document.body.classList.contains('dark-mode')) {
      localStorage.setItem('theme', 'dark');
    } else {
      localStorage.setItem('theme', 'light');
    }
  }

  // Load saved theme preference
  window.onload = () => {
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
    }
  };

  // Toast message
  function showToast(message) {
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.className = "toast show";
    setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
  }

  // Handle search, copy, export
  function handleAction(setNumber, action) {
    const input = document.getElementById('nameInput').value.trim();
    if (!input) {
      alert("Please enter at least one name or entity.");
      return;
    }

    const names = input.split('\n').map(name => name.trim()).filter(Boolean);
    let queries = [];

    if (setNumber === 1) {
      queries = names.map(name => `${name} arrest OR lawsuit OR terrorist OR money laundering`);
    } else if (setNumber === 2) {
      queries = names.map(name => `${name} lawsuit OR fined OR arrested`);
    } else if (setNumber === 3) {
      queries = names.map(name => `${name} scandal OR controversy OR misconduct`);
    }

    const urls = queries.map(query => `https://www.google.com/search?q=${encodeURIComponent(query)}`);

    if (action === 'search') {
      urls.forEach(url => window.open(url, '_blank'));
      showToast("Opening search tabs...");
    } else if (action === 'copy') {
      navigator.clipboard.writeText(urls.join('\n')).then(() => {
        showToast("URLs copied to clipboard!");
      }).catch(() => {
        alert("Failed to copy URLs.");
      });
    } else if (action === 'csv') {
      const csvContent = "data:text/csv;charset=utf-8," + urls.join('\n');
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "search_urls.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      showToast("CSV file downloaded!");
    }
  }
</script>

</body>
</html>
